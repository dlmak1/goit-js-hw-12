{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\n\r\nexport async function getImagesByQuery(query, page = 1) {\r\n  try {\r\n    const response = await axios('', {\r\n      params: {\r\n        q: query,\r\n        key: '50246788-a6edd7baee942991099f119f0',\r\n        image_type: 'photo',\r\n        orientation: 'horizontal',\r\n        safesearch: true,\r\n        per_page: 15, \r\n        page: page,   \r\n      },\r\n    });\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    return error; \r\n  }\r\n}\r\n","import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nconst galleryContainer = document.querySelector('.js-gallery');\r\nconst loader = document.querySelector('.js-loader');\r\nconst loadMoreBtn = document.querySelector('.load-more-btn');\r\n\r\nconst lightbox = new SimpleLightbox('.js-gallery a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 150,\r\n});\r\n\r\nfunction createImageCard({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) {\r\n  return `\r\n    <li class=\"image-item\">\r\n      <div>\r\n        <a href=\"${largeImageURL}\" class=\"image-link\">\r\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" loading=\"lazy\">\r\n        </a>\r\n      </div>\r\n      <div>\r\n        <ul class=\"info-box\">\r\n          <li class=\"info-item\">\r\n            <p class=\"info-title\">Likes</p>\r\n            <p class=\"info-label\">${likes}</p>\r\n          </li>\r\n          <li class=\"info-item\">\r\n            <p class=\"info-title\">Views</p>\r\n            <p class=\"info-label\">${views}</p>\r\n          </li>\r\n          <li class=\"info-item\">\r\n            <p class=\"info-title\">Comments</p>\r\n            <p class=\"info-label\">${comments}</p>\r\n          </li>\r\n          <li class=\"info-item\">\r\n            <p class=\"info-title\">Downloads</p>\r\n            <p class=\"info-label\">${downloads}</p>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </li>\r\n  `;\r\n}\r\n\r\nexport function createGallery(images) {\r\n  const markup = images.map(createImageCard).join('');\r\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\r\n  lightbox.refresh();\r\n}\r\n\r\nexport function showLoader() {\r\n  loader?.classList.remove('hidden');\r\n}\r\n\r\nexport function hideLoader() {\r\n  loader?.classList.add('hidden');\r\n}\r\n\r\nexport function showLoadMoreButton() {\r\n  loadMoreBtn?.classList.remove('hidden');\r\n}\r\n\r\nexport function hideLoadMoreButton() {\r\n  loadMoreBtn?.classList.add('hidden');\r\n}\r\n","import { getImagesByQuery } from './js/pixabay-api';\r\nimport { createGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst form = document.querySelector('.js-form');\r\nconst input = document.querySelector('input[name=\"search-text\"]');\r\nconst loadMoreBtn = document.querySelector('.load-more-btn');\r\nlet currentPage = 1;\r\nlet currentQuery = '';\r\n\r\nform.addEventListener('submit', async function (event) {\r\n  event.preventDefault();\r\n  const query = input.value.trim();\r\n\r\n  if (!query) {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Please enter a search query.',\r\n      position: 'topRight',\r\n    });\r\n    return;\r\n  }\r\n\r\n  if (query !== currentQuery) {\r\n    currentQuery = query;\r\n    currentPage = 1;\r\n    document.querySelector('.js-gallery').innerHTML = '';\r\n  }\r\n\r\n  showLoader();\r\n  hideLoadMoreButton();\r\n\r\n  try {\r\n    const res = await getImagesByQuery(query, currentPage);\r\n\r\n    if (!res.hits.length) {\r\n      iziToast.error({\r\n        title: 'No images',\r\n        message: 'Sorry, there are no images matching your search query. Please try again!',\r\n        position: 'topRight',\r\n      });\r\n    } else {\r\n      createGallery(res.hits);\r\n      if (res.totalHits > currentPage * 15) {\r\n        showLoadMoreButton();\r\n      } else {\r\n        iziToast.info({\r\n          title: 'End of results',\r\n          message: \"We're sorry, but you've reached the end of search results.\",\r\n          position: 'topCenter',\r\n        });\r\n      }\r\n    }\r\n  } catch (error) {\r\n    iziToast.error({\r\n      position: 'topCenter',\r\n      title: 'Error',\r\n      message: 'An error occurred while fetching images. Please try again later.',\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n});\r\n\r\nloadMoreBtn.addEventListener('click', async function () {\r\n  currentPage += 1;\r\n  showLoader();\r\n\r\n  try {\r\n    const res = await getImagesByQuery(currentQuery, currentPage);\r\n\r\n    if (!res.hits.length) {\r\n      iziToast.error({\r\n        title: 'No more images',\r\n        message: 'Sorry, no more images available.',\r\n        position: 'topRight',\r\n      });\r\n    } else {\r\n      createGallery(res.hits);\r\n      if (res.totalHits <= currentPage * 15) {\r\n        hideLoadMoreButton();\r\n        iziToast.info({\r\n          title: 'End of results',\r\n          message: \"We're sorry, but you've reached the end of search results.\",\r\n          position: 'topCenter',\r\n        });\r\n      }\r\n    }\r\n  } catch (error) {\r\n    iziToast.error({\r\n      position: 'topCenter',\r\n      title: 'Error',\r\n      message: 'An error occurred while fetching images. Please try again later.',\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n\r\n  const imageCards = document.querySelectorAll('.image-item');\r\n  const imageHeight = imageCards[0].getBoundingClientRect().height;\r\n  window.scrollBy({\r\n    top: imageHeight * 2, \r\n    behavior: 'smooth',\r\n  });\r\n});\r\n"],"names":["axios","getImagesByQuery","query","page","error","galleryContainer","loader","loadMoreBtn","lightbox","SimpleLightbox","createImageCard","largeImageURL","webformatURL","tags","likes","views","comments","downloads","createGallery","images","markup","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","currentPage","currentQuery","event","iziToast","res","imageHeight"],"mappings":"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"}